FROM eclipse-temurin:17-jdk-alpine
RUN mkdir /app
EXPOSE 3000

ARG JAR_FILE
COPY /target/${JAR_FILE} /app/app.jar
WORKDIR /app

ENV USERS_URL_DATABASE=${USERS_URL_DATABASE}
ENV DATABASE_USERNAME=${DATABASE_USERNAME}
ENV DATABASE_PASSWORD=${DATABASE_PASSWORD}
ENV SPRING_MAIL_USERNAME=${SPRING_MAIL_USERNAME}
ENV SPRING_MAIL_PASSWORD=${SPRING_MAIL_PASSWORD}
ENV JWT_SECRET=${JWT_SECRET}
ENV AZURE_STORAGE_CONNECTION_STRING=${AZURE_STORAGE_CONNECTION_STRING}

RUN echo "USERS_URL_DATABASE=${USERS_URL_DATABASE}"
RUN echo "DATABASE_USERNAME=${DATABASE_USERNAME}"
RUN echo "DATABASE_PASSWORD=${DATABASE_PASSWORD}"
RUN echo "SPRING_MAIL_USERNAME=${SPRING_MAIL_USERNAME}"
RUN echo "SPRING_MAIL_PASSWORD=${SPRING_MAIL_PASSWORD}"
RUN echo "JWT_SECRET=${JWT_SECRET}"
RUN echo "AZURE_STORAGE_CONNECTION_STRING=${AZURE_STORAGE_CONNECTION_STRING}"

ENTRYPOINT ["java", "-jar", "app.jar"]